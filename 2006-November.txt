From avivahl at mail.berlios.de  Fri Nov 10 16:12:34 2006
From: avivahl at mail.berlios.de (avivahl at BerliOS)
Date: Fri, 10 Nov 2006 16:12:34 +0100
Subject: [xMule-svn] r58 - in trunk: . xCore xMainFrame xMainFrame/xOptions
Message-ID: <200611101512.kAAFCYZB028739@sheep.berlios.de>

Author: avivahl
Date: 2006-11-10 16:12:31 +0100 (Fri, 10 Nov 2006)
New Revision: 58

Modified:
   trunk/xApp.cpp
   trunk/xApp.h
   trunk/xCore/xAbstractFile.cpp
   trunk/xCore/xAbstractFile.h
   trunk/xCore/xOpCodes.h
   trunk/xCore/xSafeFile.cpp
   trunk/xCore/xSafeFile.h
   trunk/xCore/xServer.cpp
   trunk/xCore/xServer.h
   trunk/xCore/xTag.cpp
   trunk/xCore/xTag.h
   trunk/xCore/xUtils.h
   trunk/xMainFrame/xAdvListCtrl.h
   trunk/xMainFrame/xKadPanel.cpp
   trunk/xMainFrame/xKadPanel.h
   trunk/xMainFrame/xMainFrame.cpp
   trunk/xMainFrame/xMainFrame.h
   trunk/xMainFrame/xOptions/xOptionsDialog.cpp
   trunk/xMainFrame/xOptions/xOptionsDialog.h
   trunk/xMainFrame/xOptions/xOptionsIcons.h
   trunk/xMainFrame/xOptions/xOptionsPage.h
   trunk/xMainFrame/xResources.h
   trunk/xMainFrame/xSearchPanel.cpp
   trunk/xMainFrame/xSearchPanel.h
   trunk/xMainFrame/xServersPanel.cpp
   trunk/xMainFrame/xServersPanel.h
   trunk/xMainFrame/xSharedFilesPanel.cpp
   trunk/xMainFrame/xSharedFilesPanel.h
   trunk/xMainFrame/xTransfersPanel.cpp
   trunk/xMainFrame/xTransfersPanel.h
Log:
Code updates... did it 2 weeks ago and don't remember what it includes :O

Modified: trunk/xApp.cpp
===================================================================
--- trunk/xApp.cpp	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xApp.cpp	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,6 +1,19 @@
-/**
- * xMuleApp.cpp
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #include "xApp.h"                      // xApp
 #include "xCore/xSafeFile.h"           // xSafeFile

Modified: trunk/xApp.h
===================================================================
--- trunk/xApp.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xApp.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,6 +1,19 @@
-/**
- * xApp - xMule's Main Application Class
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #ifndef _XAPP_H_
 #define _XAPP_H_

Modified: trunk/xCore/xAbstractFile.cpp
===================================================================
--- trunk/xCore/xAbstractFile.cpp	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xCore/xAbstractFile.cpp	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,3 +1,22 @@
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
+
+// Status: eMule 0.47c (TODO:KAD, TODO:FILE COMMENTS)
+
 #include "xAbstractFile.h"             // xAbstractFile
 #include "xUtils.h"                    // md4cpy(), md4clr()
 
@@ -15,6 +34,7 @@
     m_bCommentLoaded = false;
     m_uUserRating = 0;
     m_bHasComment = false;
+    // m_bKadCommentSearchRunning = false; TODO:KAD
 }
 
 xAbstractFile::xAbstractFile(const xAbstractFile* pAbstractFile)
@@ -28,8 +48,9 @@
     m_uUserRating = pAbstractFile->m_uUserRating;
     m_bHasComment = pAbstractFile->m_bHasComment;
     m_strFileType = pAbstractFile->m_strFileType;
+/*	m_bKadCommentSearchRunning = pAbstractFile->m_bKadCommentSearchRunning; TODO:KAD
 
-/*    const CTypedPtrList<CPtrList, Kademlia::CEntry*>& list = pAbstractFile->getNotes(); TODO:KAD
+    const CTypedPtrList<CPtrList, Kademlia::CEntry*>& list = pAbstractFile->getNotes();
     for(POSITION pos = list.GetHeadPosition(); pos != NULL; )
     {
         Kademlia::CEntry* entry = list.GetNext(pos);
@@ -94,13 +115,17 @@
 void xAbstractFile::CopyTags(const std::vector<xTag*>& tags)
 {
     for (int i = 0; i < tags.size(); i++)
+    {
         taglist.push_back(new xTag(*tags[i]));
+    }
 }
 
 void xAbstractFile::ClearTags()
 {
     for (int i = 0; i < taglist.size(); i++)
+    {
         delete taglist[i];
+    }
     taglist.clear();
 }
 
@@ -164,30 +189,30 @@
     md4cpy(m_abyFileHash, pucFileHash);
 }
 
-bool xAbstractFile::HasNullHash()const
+bool xAbstractFile::HasNullHash() const
 {
     return isnulmd4(m_abyFileHash);
 }
 
 wxUint32 xAbstractFile::GetIntTagValue(wxUint8 tagname) const
 {
-    for (int i = 0; i < taglist.GetSize(); i++)
+    for (int i = 0; i < taglist.size(); i++)
     {
         const xTag* pTag = taglist[i];
-        if (pTag->GetNameID()==tagname && pTag->IsInt())
+        if (pTag->GetNameID() == tagname && pTag->IsInt())
         {
             return pTag->GetInt();
         }
     }
-    return NULL;
+    return 0;
 }
 
 bool xAbstractFile::GetIntTagValue(wxUint8 tagname, wxUint32& ruValue) const
 {
-    for (int i = 0; i < taglist.GetSize(); i++)
+    for (int i = 0; i < taglist.size(); i++)
     {
         const xTag* pTag = taglist[i];
-        if (pTag->GetNameID()==tagname && pTag->IsInt())
+        if (pTag->GetNameID() == tagname && pTag->IsInt())
         {
             ruValue = pTag->GetInt();
             return true;
@@ -196,38 +221,38 @@
     return false;
 }
 
-wxUint64 xAbstractFile::GetInt64TagValue(const char* tagname)const
+wxUint64 xAbstractFile::GetInt64TagValue(const char* tagname) const
 {
-    for (int i = 0; i < taglist.GetSize(); i++)
+    for (int i = 0; i < taglist.size(); i++)
     {
         const xTag* pTag = taglist[i];
-        if (pTag->GetNameID()==0 && pTag->IsInt64(true) && CmpED2KTagName(pTag->GetName(), tagname)==0)
+        if (pTag->GetNameID() == 0 && pTag->IsInt64(true) && CmpED2KTagName(pTag->GetName(), tagname) == 0)
         {
             return pTag->GetInt64();
         }
     }
-    return NULL;
+    return 0;
 }
 
-wxUint64 xAbstractFile::GetInt64TagValue(wxUint8 tagname)const
+wxUint64 xAbstractFile::GetInt64TagValue(wxUint8 tagname) const
 {
-    for (int i = 0; i < taglist.GetSize(); i++)
+    for (int i = 0; i < taglist.size(); i++)
     {
         const xTag* pTag = taglist[i];
-        if (pTag->GetNameID()==tagname && pTag->IsInt64(true))
+        if (pTag->GetNameID() == tagname && pTag->IsInt64(true))
         {
             return pTag->GetInt64();
         }
     }
-    return NULL;
+    return 0;
 }
 
-bool xAbstractFile::GetInt64TagValue(wxUint8 tagname, wxUint64& ruValue)const
+bool xAbstractFile::GetInt64TagValue(wxUint8 tagname, wxUint64& ruValue) const
 {
-    for (int i = 0; i < taglist.GetSize(); i++)
+    for (int i = 0; i < taglist.size(); i++)
     {
         const xTag* pTag = taglist[i];
-        if (pTag->GetNameID()==tagname && pTag->IsInt64(true))
+        if (pTag->GetNameID() == tagname && pTag->IsInt64(true))
         {
             ruValue = pTag->GetInt64();
             return true;
@@ -236,25 +261,25 @@
     return false;
 }
 
-wxUint32 xAbstractFile::GetIntTagValue(const char* tagname)const
+wxUint32 xAbstractFile::GetIntTagValue(const char* tagname) const
 {
-    for (int i = 0; i < taglist.GetSize(); i++)
+    for (int i = 0; i < taglist.size(); i++)
     {
         const xTag* pTag = taglist[i];
-        if (pTag->GetNameID()==0 && pTag->IsInt() && CmpED2KTagName(pTag->GetName(), tagname)==0)
+        if (pTag->GetNameID() == 0 && pTag->IsInt() && CmpED2KTagName(pTag->GetName(), tagname) == 0)
         {
             return pTag->GetInt();
         }
     }
-    return NULL;
+    return 0;
 }
 
 void xAbstractFile::SetIntTagValue(wxUint8 tagname, wxUint32 uValue)
 {
-    for (int i = 0; i < taglist.GetSize(); i++)
+    for (int i = 0; i < taglist.size(); i++)
     {
         xTag* pTag = taglist[i];
-        if (pTag->GetNameID()==tagname && pTag->IsInt())
+        if (pTag->GetNameID() == tagname && pTag->IsInt())
         {
             pTag->SetInt(uValue);
             return;
@@ -266,10 +291,10 @@
 
 void xAbstractFile::SetInt64TagValue(wxUint8 tagname, wxUint64 uValue)
 {
-    for (int i = 0; i < taglist.GetSize(); i++)
+    for (int i = 0; i < taglist.size(); i++)
     {
         xTag* pTag = taglist[i];
-        if (pTag->GetNameID()==tagname && pTag->IsInt64(true))
+        if (pTag->GetNameID() == tagname && pTag->IsInt64(true))
         {
             pTag->SetInt64(uValue);
             return;
@@ -281,10 +306,10 @@
 
 const wxString& xAbstractFile::GetStrTagValue(wxUint8 tagname) const
 {
-    for (int i = 0; i < taglist.GetSize(); i++)
+    for (int i = 0; i < taglist.size(); i++)
     {
         const xTag* pTag = taglist[i];
-        if (pTag->GetNameID()==tagname && pTag->IsStr())
+        if (pTag->GetNameID() == tagname && pTag->IsStr())
         {
             return pTag->GetStr();
         }
@@ -294,10 +319,10 @@
 
 const wxString& xAbstractFile::GetStrTagValue(const char* tagname) const
 {
-    for (int i = 0; i < taglist.GetSize(); i++)
+    for (int i = 0; i < taglist.size(); i++)
     {
         const xTag* pTag = taglist[i];
-        if (pTag->GetNameID()==0 && pTag->IsStr() && CmpED2KTagName(pTag->GetName(), tagname)==0)
+        if (pTag->GetNameID() == 0 && pTag->IsStr() && CmpED2KTagName(pTag->GetName(), tagname) == 0)
         {
             return pTag->GetStr();
         }
@@ -307,9 +332,10 @@
 
 void xAbstractFile::SetStrTagValue(wxUint8 tagname, const wxChar* pszValue)
 {
-    for (int i = 0; i < taglist.GetSize(); i++){
+    for (int i = 0; i < taglist.size(); i++)
+    {
         xTag* pTag = taglist[i];
-        if (pTag->GetNameID()==tagname && pTag->IsStr())
+        if (pTag->GetNameID() == tagname && pTag->IsStr())
         {
             pTag->SetStr(pszValue);
             return;
@@ -321,10 +347,10 @@
 
 xTag* xAbstractFile::GetTag(wxUint8 tagname, wxUint8 tagtype) const
 {
-    for (int i = 0; i < taglist.GetSize(); i++)
+    for (int i = 0; i < taglist.size(); i++)
     {
         xTag* pTag = taglist[i];
-        if (pTag->GetNameID()==tagname && pTag->GetType()==tagtype)
+        if (pTag->GetNameID() == tagname && pTag->GetType() == tagtype)
         {
             return pTag;
         }
@@ -334,10 +360,10 @@
 
 xTag* xAbstractFile::GetTag(const char* tagname, wxUint8 tagtype) const
 {
-    for (int i = 0; i < taglist.GetSize(); i++)
+    for (int i = 0; i < taglist.size(); i++)
     {
         xTag* pTag = taglist[i];
-        if (pTag->GetNameID()==0 && pTag->GetType()==tagtype && CmpED2KTagName(pTag->GetName(), tagname)==0)
+        if (pTag->GetNameID() == 0 && pTag->GetType() == tagtype && CmpED2KTagName(pTag->GetName(), tagname) == 0)
         {
             return pTag;
         }
@@ -347,10 +373,10 @@
 
 xTag* xAbstractFile::GetTag(wxUint8 tagname) const
 {
-    for (int i = 0; i < taglist.GetSize(); i++)
+    for (int i = 0; i < taglist.size(); i++)
     {
         xTag* pTag = taglist[i];
-        if (pTag->GetNameID()==tagname)
+        if (pTag->GetNameID() == tagname)
         {
             return pTag;
         }
@@ -360,13 +386,47 @@
 
 xTag* xAbstractFile::GetTag(const char* tagname) const
 {
-    for (int i = 0; i < taglist.GetSize(); i++)
+    for (int i = 0; i < taglist.size(); i++)
     {
         xTag* pTag = taglist[i];
-        if (pTag->GetNameID()==0 && CmpED2KTagName(pTag->GetName(), tagname)==0)
+        if (pTag->GetNameID() == 0 && CmpED2KTagName(pTag->GetName(), tagname) == 0)
         {
             return pTag;
         }
     }
     return NULL;
 }
+
+void xAbstractFile::DeleteTag(xTag* pTag)
+{
+    for (int i = 0; i < taglist.size(); i++)
+    {
+        if (taglist[i] == pTag)
+        {
+            taglist.RemoveAt(i);
+            delete pTag;
+            return;
+        }
+    }
+}
+
+void xAbstractFile::DeleteTag(wxUint8 tagname)
+{
+	for (int i = 0; i < taglist.GetSize(); i++)
+    {
+        xTag* pTag = taglist[i];
+        if (pTag->GetNameID() == tagname)
+        {
+            taglist.RemoveAt(i);
+            delete pTag;
+            return;
+        }
+    }
+}
+
+/*void xAbstractFile::SetKadCommentSearchRunning(bool bVal){ TODO:KAD
+	if (bVal != m_bKadCommentSearchRunning){
+		m_bKadCommentSearchRunning = bVal;
+		UpdateFileRatingCommentAvail(true);
+	}
+}*/

Modified: trunk/xCore/xAbstractFile.h
===================================================================
--- trunk/xCore/xAbstractFile.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xCore/xAbstractFile.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,3 +1,22 @@
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
+
+// Status: eMule 0.47c (TODO:KAD)
+
 #ifndef _XABSTRACTFILE_H_
 #define _XABSTRACTFILE_H_
 
@@ -28,7 +47,7 @@
     const wxString& GetFileName() const { return m_strFileName; }
     virtual void SetFileName(const wxChar* pszFileName, bool bReplaceInvalidFileSystemChars = false, bool bAutoSetFileType = true); // 'bReplaceInvalidFileSystemChars' is set to 'false' for backward compatibility!
 
-    // returns the ED2K file type
+    // returns the ED2K file type (an ASCII string)
     const wxString& GetFileType() const { return m_strFileType; }
     virtual void SetFileType(const wxChar* pszFileType);
 
@@ -43,8 +62,8 @@
     virtual void SetFileSize(wxUint64 nFileSize) { m_nFileSize = nFileSize; }
     bool IsLargeFile() const { return m_nFileSize > (wxUint64)OLD_MAX_EMULE_FILE_SIZE; }
 
-    uint32 GetIntTagValue(wxUint8 tagname) const;
-    uint32 GetIntTagValue(const char* tagname) const;
+    wxUint32 GetIntTagValue(wxUint8 tagname) const;
+    wxUint32 GetIntTagValue(const char* tagname) const;
     bool GetIntTagValue(wxUint8 tagname, wxUint32& ruValue) const;
     wxUint64 GetInt64TagValue(wxUint8 tagname) const;
     wxUint64 GetInt64TagValue(const char* tagname) const;
@@ -60,24 +79,29 @@
     xTag* GetTag(const char* tagname) const;
     const std::vector<xTag*>& GetTags() const { return taglist; }
     void AddTagUnique(xTag* pTag);
+	void DeleteTag(wxUint8 tagname);
+	void DeleteTag(xTag* pTag);
     void ClearTags();
     void CopyTags(const std::vector<xTag*>& tags);
     virtual bool IsPartFile()const { return false; }
 
     bool HasComment() const { return m_bHasComment; }
     void SetHasComment(bool in) { m_bHasComment = in; }
-    wxUint32 UserRating() const { return m_uUserRating; }
+    wxUint32 UserRating(/*bool bKadSearchIndicator = false TODO:KAD*/) const { return /*(bKadSearchIndicator && m_bKadCommentSearchRunning) ? 6 :*/ m_uUserRating; }
     bool HasRating() const { return m_uUserRating > 0; }
     bool HasBadRating() const { return ( HasRating() && (m_uUserRating < 2)); }
-    void SetUserRating(UINT in) { m_uUserRating = in; }
+    void SetUserRating(wxUint32 in) { m_uUserRating = in; }
     const wxString& GetFileComment();
     wxUint32 GetFileRating();
     void LoadComment();
-    virtual void UpdateFileRatingCommentAvail() = 0;
+    virtual void UpdateFileRatingCommentAvail(bool bForceUpdate = false) = 0;
 
-    // bool AddNote(Kademlia::CEntry* pEntry); TODO:KAD
-    // const CKadEntryPtrList& getNotes() const { return m_kadNotes; }
+/*    bool AddNote(Kademlia::CEntry* pEntry); TODO:KAD
+    const CKadEntryPtrList& getNotes() const { return m_kadNotes; }
 
+    bool IsKadCommentSearchRunning() const { return m_bKadCommentSearchRunning; }
+    void SetKadCommentSearchRunning(bool bVal); TODO:KAD*/
+
 protected:
     wxString m_strFileName;
     unsigned char m_abyFileHash[16];
@@ -87,6 +111,7 @@
     bool m_bCommentLoaded;
     wxUint32 m_uUserRating;
     bool m_bHasComment;
+    // bool m_bKadCommentSearchRunning; TODO:KAD
     wxString m_strFileType;
     std::vector<xTag*> taglist;
     // CKadEntryPtrList m_kadNotes; TODO:KAD

Modified: trunk/xCore/xOpCodes.h
===================================================================
--- trunk/xCore/xOpCodes.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xCore/xOpCodes.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,3 +1,20 @@
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
+
 #ifndef _XOPCODES_H_
 #define _XOPCODES_H_
 
@@ -87,7 +104,7 @@
 #define TAGTYPE_STR14           0x1E
 #define TAGTYPE_STR15           0x1F
 #define TAGTYPE_STR16           0x20
-// The following 6 tag types are accepted by eMule 0.42f (02-Mai-2004) in receiving
+// The following 6 tag types are accepted by eMule 0.42f (02-May-2004) in receiving
 // code only because of a flaw, those tags are handled correctly, but should not be
 // handled at all
 #define TAGTYPE_STR17           0x21
@@ -97,8 +114,8 @@
 #define TAGTYPE_STR21           0x25
 #define TAGTYPE_STR22           0x26
 
-#define MAX_EMULE_FILE_SIZE 0x4000000000ui64 // = 2^38 = 256GB
-#define OLD_MAX_EMULE_FILE_SIZE 4290048000ui64  // (4294967295/PARTSIZE)*PARTSIZE = ~4GB
+#define	MAX_EMULE_FILE_SIZE 0x4000000000ui64 // = 2^38 = 256GB
+#define OLD_MAX_EMULE_FILE_SIZE	4290048000ui64 // (4294967295/PARTSIZE)*PARTSIZE = ~4GB
 
 #define ED2KFTSTR_AUDIO         "Audio" // value for eD2K tag FT_FILETYPE
 #define ED2KFTSTR_VIDEO         "Video" // value for eD2K tag FT_FILETYPE

Modified: trunk/xCore/xSafeFile.cpp
===================================================================
--- trunk/xCore/xSafeFile.cpp	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xCore/xSafeFile.cpp	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,6 +1,19 @@
-/**
- * xSafeFile.cpp
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #include "xSafeFile.h"                 // Class declarations
 #include "xUtils.h"                    // String convertion functions

Modified: trunk/xCore/xSafeFile.h
===================================================================
--- trunk/xCore/xSafeFile.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xCore/xSafeFile.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,7 +1,19 @@
-/**
- * File operating classes: xFileDataIO (base class), xSafeBufferedFile (wxFFile)
- * Array template: Array
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #ifndef _XSAFEFILE_H_
 #define _XSAFEFILE_H_

Modified: trunk/xCore/xServer.cpp
===================================================================
--- trunk/xCore/xServer.cpp	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xCore/xServer.cpp	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,6 +1,19 @@
-/**
- * xServer.cpp
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #include "xServer.h"                   // xServer
 #include "../xApp.h"                   // wxGetApp()

Modified: trunk/xCore/xServer.h
===================================================================
--- trunk/xCore/xServer.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xCore/xServer.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,6 +1,19 @@
-/**
- * xServer - A Server Class
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #ifndef _XSERVER_H_
 #define _XSERVER_H_

Modified: trunk/xCore/xTag.cpp
===================================================================
--- trunk/xCore/xTag.cpp	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xCore/xTag.cpp	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,3 +1,20 @@
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
+
 #include "../xApp.h"                   // wxGetApp()
 #include "xTag.h"
 #include "xSafeFile.h"

Modified: trunk/xCore/xTag.h
===================================================================
--- trunk/xCore/xTag.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xCore/xTag.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,3 +1,20 @@
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
+
 #ifndef _XTAG_H_
 #define _XTAG_H_
 

Modified: trunk/xCore/xUtils.h
===================================================================
--- trunk/xCore/xUtils.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xCore/xUtils.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,3 +1,20 @@
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
+
 #ifndef _XUTILS_H_
 #define _XUTILS_H_
 

Modified: trunk/xMainFrame/xAdvListCtrl.h
===================================================================
--- trunk/xMainFrame/xAdvListCtrl.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xAdvListCtrl.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,6 +1,19 @@
-/**
- * xAdvListCtrl - Advanced wxListCtrl
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #ifndef _XADVLISTCTRL_H_
 #define _XADVLISTCTRL_H_

Modified: trunk/xMainFrame/xKadPanel.cpp
===================================================================
--- trunk/xMainFrame/xKadPanel.cpp	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xKadPanel.cpp	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,7 +1,19 @@
-/**
- * xKadPanel.cpp
- * xMule's Kad Panel
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #include "xKadPanel.h"                 // xKadPanel
 #include "xResources.h"                // IDs and XPMs

Modified: trunk/xMainFrame/xKadPanel.h
===================================================================
--- trunk/xMainFrame/xKadPanel.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xKadPanel.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,7 +1,19 @@
-/**
- * xKadPanel.h
- * xMule's Kad Panel
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #ifndef _XKADPANEL_H_
 #define _XKADPANEL_H_

Modified: trunk/xMainFrame/xMainFrame.cpp
===================================================================
--- trunk/xMainFrame/xMainFrame.cpp	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xMainFrame.cpp	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,7 +1,19 @@
-/**
- * xMainFrame.cpp
- * xMule's main frame class
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #include "xMainFrame.h"                // xMainFrame
 #include "xOptions/xOptionsDialog.h"   // xOptionsDialog

Modified: trunk/xMainFrame/xMainFrame.h
===================================================================
--- trunk/xMainFrame/xMainFrame.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xMainFrame.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,7 +1,19 @@
-/**
- * xMainFrame.h
- * xMule's main frame class
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #ifndef _XMAINFRAME_H_
 #define _XMAINFRAME_H_

Modified: trunk/xMainFrame/xOptions/xOptionsDialog.cpp
===================================================================
--- trunk/xMainFrame/xOptions/xOptionsDialog.cpp	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xOptions/xOptionsDialog.cpp	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,7 +1,19 @@
-/**
- * xOptionsDialog.cpp
- * xMule's preferences dialog class
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #include "xOptionsDialog.h"            // xOptionsDialog
 #include "xOptionsPage.h"              // xOptionsPage

Modified: trunk/xMainFrame/xOptions/xOptionsDialog.h
===================================================================
--- trunk/xMainFrame/xOptions/xOptionsDialog.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xOptions/xOptionsDialog.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,7 +1,19 @@
-/**
- * xOptionsDialog.h
- * xMule's options dialog class
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #ifndef _XOPTIONSDIALOG_H_
 #define _XOPTIONSDIALOG_H_

Modified: trunk/xMainFrame/xOptions/xOptionsIcons.h
===================================================================
--- trunk/xMainFrame/xOptions/xOptionsIcons.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xOptions/xOptionsIcons.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,5 +1,22 @@
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
+
 /*
-This file simply includes all the XPM icons of the options panel list.
+   This file simply includes all the XPM icons of the options panel list.
 */
 
 #ifndef _XOPTIONSICONS_H_

Modified: trunk/xMainFrame/xOptions/xOptionsPage.h
===================================================================
--- trunk/xMainFrame/xOptions/xOptionsPage.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xOptions/xOptionsPage.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,3 +1,20 @@
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
+
 #ifndef _XOPTIONSPAGE_
 #define _XOPTIONSPAGE_
 

Modified: trunk/xMainFrame/xResources.h
===================================================================
--- trunk/xMainFrame/xResources.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xResources.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,7 +1,19 @@
-/*
- * xResources.h
- * IDs for controls and Images (XPM format)
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #ifndef _XRESOURCES_H_
 #define _XRESOURCES_H_

Modified: trunk/xMainFrame/xSearchPanel.cpp
===================================================================
--- trunk/xMainFrame/xSearchPanel.cpp	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xSearchPanel.cpp	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,7 +1,19 @@
-/**
- * xSearchPanel.cpp
- * xMule's Search Panel
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #include "xSearchPanel.h"              // xSearchPanel
 #include "xResources.h"                // IDs and XPMs

Modified: trunk/xMainFrame/xSearchPanel.h
===================================================================
--- trunk/xMainFrame/xSearchPanel.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xSearchPanel.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,7 +1,19 @@
-/**
- * xSearchPanel.h
- * xMule's Search Panel
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #ifndef _XSEARCHPANEL_H_
 #define _XSEARCHPANEL_H_

Modified: trunk/xMainFrame/xServersPanel.cpp
===================================================================
--- trunk/xMainFrame/xServersPanel.cpp	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xServersPanel.cpp	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,7 +1,19 @@
-/**
- * xServersPanel.cpp
- * xMule's Servers Panel
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #include "xServersPanel.h"             // xServersPanel
 

Modified: trunk/xMainFrame/xServersPanel.h
===================================================================
--- trunk/xMainFrame/xServersPanel.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xServersPanel.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,7 +1,19 @@
-/**
- * xServersPanel.h
- * xMule's Servers Panel
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #ifndef _XSERVERSPANEL_H_
 #define _XSERVERSPANEL_H_

Modified: trunk/xMainFrame/xSharedFilesPanel.cpp
===================================================================
--- trunk/xMainFrame/xSharedFilesPanel.cpp	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xSharedFilesPanel.cpp	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,7 +1,19 @@
-/**
- * xSharedFilesPanel.cpp
- * xMule's Shared Files Panel
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #include "xSharedFilesPanel.h"         // xSharedFilesPanel
 #include "xResources.h"                // IDs and XPMs

Modified: trunk/xMainFrame/xSharedFilesPanel.h
===================================================================
--- trunk/xMainFrame/xSharedFilesPanel.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xSharedFilesPanel.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,7 +1,19 @@
-/**
- * xSharedFilesPanel.h
- * xMule's Shared Files Panel
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #ifndef _XSHAREDFILESPANEL_H_
 #define _XSHAREDFILESPANEL_H_

Modified: trunk/xMainFrame/xTransfersPanel.cpp
===================================================================
--- trunk/xMainFrame/xTransfersPanel.cpp	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xTransfersPanel.cpp	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,7 +1,19 @@
-/**
- * xTransfersPanel.cpp
- * xMule's Transfers Panel
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #include "xTransfersPanel.h"           // xTransfersPanel
 #include "xResources.h"                // IDs and XPMs

Modified: trunk/xMainFrame/xTransfersPanel.h
===================================================================
--- trunk/xMainFrame/xTransfersPanel.h	2006-10-15 03:29:21 UTC (rev 57)
+++ trunk/xMainFrame/xTransfersPanel.h	2006-11-10 15:12:31 UTC (rev 58)
@@ -1,7 +1,19 @@
-/**
- * xTransfersPanel.h
- * xMule's Transfers Panel
- */
+// The xMule Project - A Peer-2-Peer File Sharing Program
+//
+// Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
+//
+// This program is free software; you can redistribute it and/or
+// modify it under the terms of Version 2 of the GNU General Public
+// License as published by the Free Software Foundation.
+//
+// This program is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with this program; if not, write to the Free Software
+// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA
 
 #ifndef _XTRANSFERSPANEL_H_
 #define _XTRANSFERSPANEL_H_



From avivahl at mail.berlios.de  Sun Nov 12 23:33:28 2006
From: avivahl at mail.berlios.de (avivahl at BerliOS)
Date: Sun, 12 Nov 2006 23:33:28 +0100
Subject: [xMule-svn] r59 - in trunk: . xMainFrame
Message-ID: <200611122233.kACMXS8l027493@sheep.berlios.de>

Author: avivahl
Date: 2006-11-12 23:33:27 +0100 (Sun, 12 Nov 2006)
New Revision: 59

Modified:
   trunk/COMPILE
   trunk/xApp.cpp
   trunk/xMainFrame/xKadPanel.cpp
   trunk/xMainFrame/xSearchPanel.cpp
   trunk/xMainFrame/xServersPanel.cpp
   trunk/xMainFrame/xSharedFilesPanel.cpp
   trunk/xMule.vcproj
Log:
1. Updated to using wxWidgets 2.7.2 (with my own custom /include/wx/msw/setup.h file :)).

2. xMule now checks if the .xrc files are in the current working directory... if not, a warning will pop at start and the program will shut down.

3. xMule now verifies the loading of xrc panels... It won't crash anymore if the .xrc file is missing some part (like the kad panel for example).

Modified: trunk/COMPILE
===================================================================
--- trunk/COMPILE	2006-11-10 15:12:31 UTC (rev 58)
+++ trunk/COMPILE	2006-11-12 22:33:27 UTC (rev 59)
@@ -1,11 +1,11 @@
 Windows:
 --------
 Compiler: Microsoft Visual Studio 2005.
-Library: wxMSW-2.7.1 (Unicode ON, Static library).
+Library: wxMSW-2.7.2 (Unicode ON, Static library).
 Notes: Solution file is provided.
 
 Linux:
 --------
 Compiler: GCC 4.x. Older versions may work as well, but untested.
-Library: wxGTK-2.7.1 (--enable-unicode --enable-monolithic --enable-static --enable-debug).
+Library: wxGTK-2.7.2 (--enable-unicode --enable-monolithic --enable-static --enable-debug).
 Notes: Used Premake-3.1 for creating the makefiles.  Makefiles are provided.

Modified: trunk/xApp.cpp
===================================================================
--- trunk/xApp.cpp	2006-11-10 15:12:31 UTC (rev 58)
+++ trunk/xApp.cpp	2006-11-12 22:33:27 UTC (rev 59)
@@ -175,37 +175,21 @@
 bool xApp::InitResources()
 {
     //Check that the XRC resources are available
-    if (!wxFileExists(wxT("xMainFrame.xrc")) && !wxFileExists(wxT("../xMainFrame.xrc")))
+    if (!wxFileExists(wxT("xMainFrame.xrc")))
     {
         wxMessageBox(wxT("xMainFrame.xrc could not be found. Shuting down!"));
         return false; // Terminate app
     }
-    if (!wxFileExists(wxT("xOptions.xrc")) && !wxFileExists(wxT("../xOptions.xrc")))
+    if (!wxFileExists(wxT("xOptions.xrc")))
     {
         wxMessageBox(wxT("xOptions.xrc could not be found. Shuting down!"));
         return false; // Terminate app
     }
 
-    // Load xMainFrame.xrc
     wxXmlResource::Get()->InitAllHandlers();
-    if (wxFileExists(wxT("xMainFrame.xrc")))
-    {
-        wxXmlResource::Get()->Load(wxT("xMainFrame.xrc"));
-    }
-    else
-    {
-        wxXmlResource::Get()->Load(wxT("../xMainFrame.xrc"));
-    }
-
-    // Load xOptions.xrc
-    if (wxFileExists(wxT("xOptions.xrc")))
-    {
-        wxXmlResource::Get()->Load(wxT("xOptions.xrc"));
-    }
-    else
-    {
-        wxXmlResource::Get()->Load(wxT("../xOptions.xrc"));
-    }
+    wxXmlResource::Get()->Load(wxT("xMainFrame.xrc")); // Load xMainFrame.xrc
+    wxXmlResource::Get()->Load(wxT("xOptions.xrc")); // Load xOptions.xrc
+    
     return true;
 }
 

Modified: trunk/xMainFrame/xKadPanel.cpp
===================================================================
--- trunk/xMainFrame/xKadPanel.cpp	2006-11-10 15:12:31 UTC (rev 58)
+++ trunk/xMainFrame/xKadPanel.cpp	2006-11-12 22:33:27 UTC (rev 59)
@@ -27,13 +27,15 @@
 
 xKadPanel::xKadPanel(wxWindow* aParent)
 {
-    wxXmlResource::Get()->LoadPanel(this, aParent, wxT("KAD_PANEL"));
-
+    if (!wxXmlResource::Get()->LoadPanel(this, aParent, wxT("KAD_PANEL")))
+    {
+        return;
+    }
     ContactsLabel=XRCCTRL(*this, "ST_CONTACTS", wxStaticText);
     SearchesLabel=XRCCTRL(*this, "ST_SEARCHES", wxStaticText);
     ContactsListCtrl=XRCCTRL(*this, "LC_CONTACTS", wxListCtrl);
     SearchesListCtrl=XRCCTRL(*this, "LC_SEARCHES", wxListCtrl);
-
+    
     XRCCTRL(*this, "SB_CONTACTS", wxStaticBitmap)->SetBitmap(wxBitmap(contacts_xpm));
     XRCCTRL(*this, "SB_SEARCHES", wxStaticBitmap)->SetBitmap(wxBitmap(currentsearches_xpm));
 

Modified: trunk/xMainFrame/xSearchPanel.cpp
===================================================================
--- trunk/xMainFrame/xSearchPanel.cpp	2006-11-10 15:12:31 UTC (rev 58)
+++ trunk/xMainFrame/xSearchPanel.cpp	2006-11-12 22:33:27 UTC (rev 59)
@@ -31,7 +31,11 @@
 
 xSearchPanel::xSearchPanel(wxWindow* aParent)
 {
-    wxXmlResource::Get()->LoadPanel(this, aParent, wxT("SEARCH_PANEL"));
+    if (!wxXmlResource::Get()->LoadPanel(this, aParent, wxT("SEARCH_PANEL")))
+    {
+        return;
+    }
+
     SearchText=XRCCTRL(*this, "ID_NAMETEXT", wxTextCtrl);
     SearchUnicode=XRCCTRL(*this, "ID_UNICODECHECK", wxCheckBox);
     SearchType=XRCCTRL(*this, "ID_TYPECHOICE", wxChoice);

Modified: trunk/xMainFrame/xServersPanel.cpp
===================================================================
--- trunk/xMainFrame/xServersPanel.cpp	2006-11-10 15:12:31 UTC (rev 58)
+++ trunk/xMainFrame/xServersPanel.cpp	2006-11-12 22:33:27 UTC (rev 59)
@@ -36,7 +36,10 @@
 
 xServersPanel::xServersPanel(wxWindow* aParent)
 {
-    wxXmlResource::Get()->LoadPanel(this, aParent, wxT("SERVERS_PANEL"));
+    if (!wxXmlResource::Get()->LoadPanel(this, aParent, wxT("SERVERS_PANEL")))
+    {
+        return;
+    }
 
     ServersLabel=XRCCTRL(*this, "ST_SERVERS", wxStaticText);
     ServersListCtrl=XRCCTRL(*this, "LC_SERVERS", wxListCtrl);

Modified: trunk/xMainFrame/xSharedFilesPanel.cpp
===================================================================
--- trunk/xMainFrame/xSharedFilesPanel.cpp	2006-11-10 15:12:31 UTC (rev 58)
+++ trunk/xMainFrame/xSharedFilesPanel.cpp	2006-11-12 22:33:27 UTC (rev 59)
@@ -28,7 +28,10 @@
 
 xSharedFilesPanel::xSharedFilesPanel(wxWindow* aParent)
 {
-    wxXmlResource::Get()->LoadPanel(this, aParent, wxT("SHAREDFILES_PANEL"));
+    if (!wxXmlResource::Get()->LoadPanel(this, aParent, wxT("SHAREDFILES_PANEL")))
+    {
+        return;
+    }
 
     XRCCTRL(*this, "SB_SHAREDFILES", wxStaticBitmap)->SetBitmap(wxBitmap(sharedfileslist_xpm));
 

Modified: trunk/xMule.vcproj
===================================================================
--- trunk/xMule.vcproj	2006-11-10 15:12:31 UTC (rev 58)
+++ trunk/xMule.vcproj	2006-11-12 22:33:27 UTC (rev 59)
@@ -40,7 +40,7 @@
 			<Tool
 				Name="VCCLCompilerTool"
 				Optimization="0"
-				AdditionalIncludeDirectories="&quot;C:\wxMSW-2.7.1\include&quot;;&quot;C:\wxMSW-2.7.1\lib\vc_lib\mswud&quot;"
+				AdditionalIncludeDirectories="&quot;C:\wxMSW-2.7.2\include&quot;;&quot;C:\wxMSW-2.7.2\lib\vc_lib\mswud&quot;"
 				PreprocessorDefinitions="__WXDEBUG__"
 				MinimalRebuild="true"
 				BasicRuntimeChecks="3"
@@ -55,7 +55,7 @@
 			/>
 			<Tool
 				Name="VCResourceCompilerTool"
-				AdditionalIncludeDirectories="&quot;C:\wxMSW-2.7.1\include&quot;"
+				AdditionalIncludeDirectories="&quot;C:\wxMSW-2.7.2\include&quot;"
 			/>
 			<Tool
 				Name="VCPreLinkEventTool"
@@ -65,7 +65,7 @@
 				AdditionalDependencies="comctl32.lib rpcrt4.lib winmm.lib wsock32.lib"
 				OutputFile="$(OutDir)/$(InputName)-Debug.exe"
 				LinkIncremental="2"
-				AdditionalLibraryDirectories="&quot;C:\wxMSW-2.7.1\lib\vc_lib&quot;"
+				AdditionalLibraryDirectories="&quot;C:\wxMSW-2.7.2\lib\vc_lib&quot;"
 				GenerateDebugInformation="true"
 				ProgramDatabaseFile="$(OutDir)/$(ProjectName).pdb"
 				SubSystem="2"
@@ -122,7 +122,7 @@
 			<Tool
 				Name="VCCLCompilerTool"
 				Optimization="3"
-				AdditionalIncludeDirectories="&quot;C:\wxMSW-2.7.1\include&quot;;&quot;C:\wxMSW-2.7.1\lib\vc_lib\mswu&quot;"
+				AdditionalIncludeDirectories="&quot;C:\wxMSW-2.7.2\include&quot;;&quot;C:\wxMSW-2.7.2\lib\vc_lib\mswu&quot;"
 				RuntimeLibrary="2"
 				UsePrecompiledHeader="0"
 				WarningLevel="4"
@@ -134,7 +134,7 @@
 			/>
 			<Tool
 				Name="VCResourceCompilerTool"
-				AdditionalIncludeDirectories="&quot;C:\wxMSW-2.7.1\include&quot;"
+				AdditionalIncludeDirectories="&quot;C:\wxMSW-2.7.2\include&quot;"
 			/>
 			<Tool
 				Name="VCPreLinkEventTool"
@@ -144,7 +144,7 @@
 				AdditionalDependencies="comctl32.lib rpcrt4.lib winmm.lib wsock32.lib"
 				OutputFile="$(OutDir)/$(InputName).exe"
 				LinkIncremental="1"
-				AdditionalLibraryDirectories="&quot;C:\wxMSW-2.7.1\lib\vc_lib&quot;"
+				AdditionalLibraryDirectories="&quot;C:\wxMSW-2.7.2\lib\vc_lib&quot;"
 				GenerateDebugInformation="false"
 				SubSystem="2"
 				OptimizeReferences="2"
@@ -333,7 +333,7 @@
 					>
 					<Tool
 						Name="VCResourceCompilerTool"
-						AdditionalIncludeDirectories="&quot;C:\wxMSW-2.7.1\include&quot;"
+						AdditionalIncludeDirectories="&quot;C:\wxMSW-2.7.2\include&quot;"
 					/>
 				</FileConfiguration>
 				<FileConfiguration
@@ -341,7 +341,7 @@
 					>
 					<Tool
 						Name="VCResourceCompilerTool"
-						AdditionalIncludeDirectories="&quot;C:\wxMSW-2.7.1\include&quot;"
+						AdditionalIncludeDirectories="&quot;C:\wxMSW-2.7.2\include&quot;"
 					/>
 				</FileConfiguration>
 			</File>



From avivahl at mail.berlios.de  Tue Nov 14 00:22:09 2006
From: avivahl at mail.berlios.de (avivahl at BerliOS)
Date: Tue, 14 Nov 2006 00:22:09 +0100
Subject: [xMule-svn] r60 - trunk
Message-ID: <200611132322.kADNM9n5002862@sheep.berlios.de>

Author: avivahl
Date: 2006-11-14 00:22:06 +0100 (Tue, 14 Nov 2006)
New Revision: 60

Modified:
   trunk/xApp.cpp
Log:
Now gives more information to the user when it can't find the .xrc files.

Modified: trunk/xApp.cpp
===================================================================
--- trunk/xApp.cpp	2006-11-12 22:33:27 UTC (rev 59)
+++ trunk/xApp.cpp	2006-11-13 23:22:06 UTC (rev 60)
@@ -1,4 +1,4 @@
-// The xMule Project - A Peer-2-Peer File Sharing Program
+?// The xMule Project - A Peer-2-Peer File Sharing Program
 //
 // Copyright (C) 2004-2006 Avi Vahl ( avivahl [AT] gmail.com )
 //
@@ -23,10 +23,11 @@
 #include "xMainFrame/XPMs/SplashScreen.xpm"    // Splash Screen Image
 
 #include <wx/bitmap.h>                 // wxBitmap
-#include <wx/filefn.h>                 // wxFileExists
+#include <wx/filefn.h>                 // wxFileExists, wxGetCwd
 #include <wx/listctrl.h>               // wxListCtrl
 #include <wx/msgdlg.h>                 // wxMessageBox
 #include <wx/splash.h>                 // wxSplashScreen
+#include <wx/stdpaths.h>               // wxStandardPaths
 #include <wx/tooltip.h>                // wxToolTip
 #include <wx/xrc/xmlres.h>             // wxXmlResource
 
@@ -144,11 +145,11 @@
 
 bool xApp::OnInit()
 {
-    if (!InitResources()) // Something went wrong with resources loading
+    SetAppName(AppName);
+    if (!InitResources())
     {
-        return false;
+        return false; // Something went wrong with resources loading
     }
-    SetAppName(AppName);
 
     wxToolTip::Enable(true); // Enable tooltips globally
     wxToolTip::SetDelay(500);
@@ -174,16 +175,27 @@
 
 bool xApp::InitResources()
 {
+    wxString CurrentWorkingDir = wxGetCwd();
+    wxStandardPaths StdPaths;
+    wxString UserDataDir = StdPaths.GetUserDataDir();
     //Check that the XRC resources are available
     if (!wxFileExists(wxT("xMainFrame.xrc")))
     {
-        wxMessageBox(wxT("xMainFrame.xrc could not be found. Shuting down!"));
-        return false; // Terminate app
+        wxString toShow=wxT("xMainFrame.xrc could not be found.");
+        toShow<<wxT("\n\nCurrent Working Directory: ")<<CurrentWorkingDir;
+        toShow<<wxT("\nUser Data Directory: ")<<UserDataDir;
+        toShow<<wxT("\n\nShuting down xMule!"); 
+        wxMessageBox(toShow);
+        return false; // Couldn't initialize resources!
     }
     if (!wxFileExists(wxT("xOptions.xrc")))
     {
-        wxMessageBox(wxT("xOptions.xrc could not be found. Shuting down!"));
-        return false; // Terminate app
+        wxString toShow=wxT("xOptions.xrc could not be found.");
+        toShow<<wxT("\n\nCurrent Working Directory: ")<<CurrentWorkingDir;
+        toShow<<wxT("\nUser Data Directory: ")<<UserDataDir;
+        toShow<<wxT("\n\nShuting down xMule!"); 
+        wxMessageBox(toShow);
+        return false; // Couldn't initialize resources!
     }
 
     wxXmlResource::Get()->InitAllHandlers();



